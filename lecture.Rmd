---
title: "Intro to R"
author: "Jacob Carey"
date: \today
output: 
  beamer_presentation:
    toc: true
    theme: "Szeged"
    slide_level: 2
---

# Basics

## Adding Numbers and Calculating Tips

```{r}
# What's 2 + 2?
2 + 2

# How much do I need to tip on $40?
40 * 0.15

# What's the probability of three heads?
0.5 ^ 3
```

## Variables

- Variables (among other things) separate R from a calculator
    - The `<-` symbol indicates **assignment** of a *value* to *variable*
- Allow you to *descriptively* name an important number for combination with other *descriptively* named numbers
- Lots of restrictions about them

- There are four primary types of variables
    1. Numeric (1.45)
    2. Integer (3)
    3. Character ("hello, world")
    4. Boolean (TRUE)

- Naming variables
    - contains only characters (case matters!!), numbers, periods, and underscores
    - Must begin with a character
    - Be descriptive!

```{r, error=TRUE}
variable.number <- 4 # store a number in a variable
variable.number

variable.character <- "hello" # store a word in a variable

variable.number * 2 # use the variable to do something

variable.number + variable.character # can I add a number and a character?
```

## Vectors

- Vectors in R a (ordered, but possibly not sorted) collection of *one type of variable*
- They allow you to perform operations across multiple numbers, characters, etc
    - Allow you to do stuff with basic *data*
- One way to create a variable is through the `c` *command*

```{r}
vector.numbers <- c(4.3, 7.1, 5.0, 3.1) # collection of numerics
vector.error <- c("ab", 4.3, 2.1, 17.8) # must be one type of variable!
vector.error # inspect contents
```

- notice that `vector.error` has *coerced* the numeric data to character data
    - Remember: a vector is a collection of **one type of variable**

## Comparisons

- R supports comparison operators
    - `>` greater than
    - `<` less than
    - `==` Equal to
    - `!=` Not equal to
- For vector data, comparisons are made element-wise 

```{r}
4 > 2
vector.numbers == 7.1
vector.numbers < 6
```

## Functions

- R allows you to use many *built-in* as well as *third-party* (available through downloadable packages) to do many useful things with data
- Want to calculate the mean of your data? Use a function!
- Want to do a t-test? Use a function!
- Functions are syntactically written as `function.name(arg1, arg2, ...)` 
    - Number of arguments can vary from 0 to essentially unlimited
    - Arguments can be variables, vectors, etc. 
    - Arguments can sometimes be other functions!

```{r}
homework <- c(99, 85, 90, 86, 30, 75) # c is a function too!
mean(homework) # what's the mean homework score?
sd(homework) # what's the standard deviation of the homework score?
```

# Actually being useful

## Reading in Data

- Data can be read in from a local file (such as a CSV)
- Similarly, data be read in from a url
    - Both ways just require 1) a function and 2) a character revealing the location of the file
- Simplest function for reading CSV data is `read.csv`

```{r}
ucla.data <- read.csv("http://www.ats.ucla.edu/stat/data/hsb2.csv") # same function for reading local data
head(ucla.data) # inspect data using the head function
ucla.data[100, ] # view the 100th row
summary(ucla.data) # calculate default summary statistics of every variable
```

## Data Frames

- What type of variable is `ucla.data`?
    - It's a **data frame** which is just a collection of *named* vectors that are all the same length
    - These individual *variables* or *columns* can be accessed using the cryptic looking `$` symbol

```{r}
# mean math score
mean(ucla.data$math) 

# t test comparing the math and science distributions
t.test(ucla.data$math, ucla.data$science, paired=TRUE)
```

- Word of *warning*
    - The `attach` function can be used to access variables in a dataset without the dataset name and `$`, but can cause issues further down the line
    - Avoid `attach` if you can!
- Instead, many functions support `data` as an argument, and allow variables to be called by name

```{r}
# are the writing scores between genders different?
t.test(write ~ female, data=ucla.data)

# 'subset' the data and only keep the female students
female.data <- subset(ucla.data, # data name
                      female == 1) # conditions for keeping data (note the '==' equality)
```

## Installing packages

- Simple!

```{r, eval=FALSE}
install.packages("ggplot2") # install the package
library(ggplot2)            # now load the package
```

# Basic statistics with R

## Correlation, Covariance, and Variance

```{r}
var(ucla.data$write)
cov(ucla.data$write, ucla.data$read)
cor(ucla.data$write, ucla.data$read)
```

## Regression
```{r} 
# make inference about math from science and reading (linear regression)
lm(math ~ science + read, data=ucla.data)

# make inference about gender from science and reading (logistic regression)
glm(female ~ science + read, data=ucla.data, family=binomial)
```

# Plotting

## Intro

- Analysis is all well and good, but how do we *look* at our data?
- Many options but most people use either
    1. Base R functions
    2. The ggplot2 package

## Base R
```{r}
# histogram
hist(ucla.data$write)

# scatterplot of reading and writing scores
# note that functions can run across multiple lines!
plot(ucla.data$read, ucla.data$write, # x and y data
     main="Plot of scores", # main title
     xlab="Reading", # x axis label
     ylab="Writing") # y axis label

# add a line comparing math and science
lines(sort(ucla.data$math),    # functions inside of functions!
      sort(ucla.data$science), 
      col="blue")              # color this line blue

# add a smoother to the scatter plot
lines(lowess(ucla.data$read, ucla.data$write),
      col="orange")            # color this line orange
```

## ggplot2
- ggplot2 graphing requires very different syntax from base R...

```{r, message=FALSE}
# note that every new session of R requires packages to be loaded manually
library(ggplot2)

# histogram
ggplot(data=ucla.data, aes(x=write)) +
    geom_histogram() + 
    xlab("Writing") +
    ggtitle("Distribution")

# investigate distribution of science scores by SES
ggplot(data=ucla.data, aes(x=science)) +
    geom_histogram(aes(fill=as.character(ses))) + # note that grouping variable must be a character
    xlab("Writing") + 
    ggtitle("Distributions by Socioeconomic Status")
```

## Getting Help?
